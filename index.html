<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Growing Flow Calculator</title>

<style>
  :root{
    --red:#c00000;
    --black:#000000;
    --white:#ffffff;
  }
  *{ box-sizing:border-box; }

  body{
    margin:0;
    font-family: Arial, sans-serif;
    color:var(--black);
    background:
      linear-gradient(rgba(255,255,255,0.94), rgba(255,255,255,0.94)),
      url("logo.png") no-repeat center center fixed;
    background-size: 55%;
  }

  .wrap{ max-width:1200px; margin:0 auto; padding:20px; }

  .card{
    background:var(--white);
    border:3px solid var(--black);
    border-radius:18px;
    padding:18px;
    overflow:hidden;
  }

  /* ХЕДЕР: заголовок і логотип в один ряд */
  .topbar{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
    flex-wrap:nowrap;
  }
  .topbar img{
    height:34px;
    width:auto;
    display:block;
    flex:0 0 auto;
  }

  h1{
    margin:0;
    font-size:34px;
    line-height:1.05;
    color:var(--red);
    font-weight:800;
    flex:1 1 auto;
    min-width:0;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  @media (max-width: 900px){
    .topbar{ flex-wrap:wrap; }
    h1{ font-size:28px; white-space:normal; }
  }

  .note{
    margin:10px 0 14px;
    font-size:13px;
    line-height:1.45;
    color:var(--black);
  }

  .grid3{
    display:grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap:14px;
  }
  .grid2{
    display:grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap:14px;
  }
  @media (max-width: 900px){
    .grid3{ grid-template-columns: 1fr; }
    .grid2{ grid-template-columns: 1fr; }
  }

  .box{
    border:2px solid var(--black);
    border-radius:14px;
    padding:12px;
    background:var(--white);
    overflow:hidden;
  }

  .boxTitle{
    color:var(--red);
    font-weight:800;
    margin:0 0 10px;
    font-size:18px;
  }

  label{
    display:block;
    font-size:13px;
    font-weight:700;
    margin:0 0 6px;
  }

  input, button{
    width:100%;
    padding:12px 12px;
    border:2px solid var(--black);
    border-radius:12px;
    background:var(--white);
    color:var(--black);
    font-size:14px;
    outline:none;
    min-width:0;
  }

  input:focus{ border-color:var(--red); }

  .btn{
    background:var(--red);
    color:var(--white);
    border-color:var(--black);
    font-weight:800;
    cursor:pointer;
  }
  .btn:hover{ filter:brightness(0.95); }

  .rowBtns{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    margin-top:12px;
  }

  .smallBtn{
    width:auto;
    padding:10px 12px;
    border-radius:12px;
    border:2px solid var(--black);
    background:var(--white);
    color:var(--black);
    font-weight:900;
    cursor:pointer;
  }
  .smallBtn.red{ background:var(--red); color:var(--white); }

  .tabs{
    display:flex;
    gap:10px;
    margin:14px 0 12px;
    flex-wrap:wrap;
  }

  .tab{
    width:auto;
    padding:10px 14px;
    border:2px solid var(--black);
    border-radius:999px;
    background:var(--white);
    color:var(--black);
    font-weight:800;
    cursor:pointer;
  }
  .tab.active{ background:var(--red); color:var(--white); }

  .summary{
    display:grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap:12px;
    margin-top:14px;
  }
  @media (max-width: 900px){ .summary{ grid-template-columns: 1fr; } }

  .kpi{
    border:2px solid var(--black);
    border-radius:14px;
    padding:12px;
    background:var(--white);
    overflow:hidden;
  }
  .kpi .t{ font-size:12px; font-weight:800; }
  .kpi .v{
    margin-top:6px;
    font-size:20px;
    font-weight:900;
    color:var(--red);
    font-family: monospace;
    white-space:normal;
  }
  .kpi .s{
    margin-top:6px;
    font-size:12px;
    font-weight:700;
    font-family: monospace;
    white-space:normal;
  }

  .tableWrap{
    margin-top:12px;
    border:2px solid var(--black);
    border-radius:14px;
    overflow:auto;
    max-height:520px;
    background:var(--white);
  }

  table{
    width:100%;
    border-collapse:collapse;
    min-width: 900px;
  }
  thead th{
    position:sticky;
    top:0;
    background:var(--black);
    color:var(--white);
    padding:10px;
    font-size:12px;
    text-align:left;
    white-space:nowrap;
    border-bottom:2px solid var(--black);
  }
  tbody td{
    padding:10px;
    border-bottom:2px solid var(--black);
    font-size:13px;
    white-space:nowrap;
    font-family: monospace;
  }

  .withdrawList{
    display:grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap:10px;
    margin-top:10px;
  }
  @media (max-width: 900px){ .withdrawList{ grid-template-columns: 1fr; } }

  .withdrawItem{
    display:flex;
    gap:8px;
    align-items:center;
    min-width:0;
  }
  .withdrawItem input{ flex:1; }

  .xBtn{
    width:auto;
    padding:10px 12px;
    border-radius:12px;
    border:2px solid var(--black);
    background:var(--white);
    color:var(--black);
    font-weight:900;
    cursor:pointer;
    flex:0 0 auto;
  }
  .xBtn:hover{ background:var(--red); color:var(--white); }
</style>
</head>

<body>
<div class="wrap">
  <div class="card">

    <div class="topbar">
      <h1>Growing Flow Calculator</h1>
      <img src="cashflow.png" alt="CASHFLOW" />
    </div>

    <div class="note">
      Day 1 = 0.3% on opened flow amount. Each paid day +0.01%. Sunday: no reward and no +0.01%.
      Rewards go to wallet (no reinvest). Withdraw resets progress (wallet -> 0, rate progress reset),
      next paid day starts from 0.3%.
    </div>

    <div class="grid3">
      <div>
        <label>Deposit (USDT)</label>
        <input id="amount" type="text" inputmode="decimal" value="1000" />
      </div>
      <div>
        <label>Deposit date</label>
        <input id="depositDate" type="date" />
      </div>
      <div>
        <label>Currency</label>
        <input id="currency" type="text" value="USDT" />
      </div>
    </div>

    <div class="box" style="margin-top:14px;">
      <div class="boxTitle">ECR boost</div>

      <div class="grid3">
        <div>
          <label>ECR rate (₮)</label>
          <input id="ecrRate" type="text" inputmode="decimal" value="816.80" />
        </div>
        <div>
          <label>Flow multiplier</label>
          <!-- ТЕПЕР РЕДАГУЄТЬСЯ -->
          <input id="boostPct" type="text" inputmode="decimal" value="150%" />
        </div>
        <div>
          <label>Flow opens on</label>
          <!-- ТЕПЕР РЕДАГУЄТЬСЯ -->
          <input id="boostedAmount" type="text" inputmode="decimal" value="0" />
        </div>
      </div>

      <div class="grid3" style="margin-top:12px;">
        <div>
          <label>Extra needed (₮)</label>
          <!-- ТЕПЕР РЕДАГУЄТЬСЯ -->
          <input id="extraFiat" type="text" inputmode="decimal" value="0" />
        </div>
        <div>
          <label>ECR required</label>
          <!-- ТЕПЕР РЕДАГУЄТЬСЯ -->
          <input id="ecrNeeded" type="text" inputmode="decimal" value="0" />
        </div>
        <div>
          <label>Status</label>
          <input id="ecrNote" type="text" readonly value="ECR = extra / rate" />
        </div>
      </div>

      <div class="rowBtns">
        <button class="smallBtn" id="resetAutoBtn" type="button">Reset auto</button>
      </div>
    </div>

    <div class="grid2" style="margin-top:14px;">
      <div class="box">
        <div class="boxTitle">Withdraw dates</div>
        <div style="font-size:13px;font-weight:700;">
          Add up to 10 dates. Each date withdraws wallet and resets +0.01% progress.
        </div>

        <div class="rowBtns">
          <button class="smallBtn red" id="addWithdrawBtn" type="button">+ Add date</button>
          <button class="smallBtn" id="clearWithdrawBtn" type="button">Clear</button>
        </div>

        <div class="withdrawList" id="withdrawList"></div>
      </div>

      <div class="box">
        <div class="boxTitle">Rates</div>
        <div class="grid2">
          <div>
            <label>Start rate %</label>
            <input id="startRate" type="text" inputmode="decimal" value="0.30" />
          </div>
          <div>
            <label>Daily bonus %</label>
            <input id="rateStep" type="text" inputmode="decimal" value="0.01" />
          </div>
        </div>

        <div style="margin-top:12px;">
          <label style="display:flex;align-items:center;gap:10px;">
            <input id="startNextDay" type="checkbox" checked style="width:auto;margin:0;" />
            Start accrual from next day after deposit
          </label>
        </div>
      </div>
    </div>

    <div class="rowBtns">
      <button class="btn" id="calcBtn" type="button">Calculate</button>
      <button class="smallBtn" id="exportBtn" type="button">Export CSV</button>
    </div>

    <div class="summary" id="kpiWrap" style="display:none;">
      <div class="kpi">
        <div class="t">Opened flow amount</div>
        <div class="v" id="kpiDeposit">0</div>
        <div class="s" id="kpiMeta">0</div>
      </div>
      <div class="kpi">
        <div class="t">Wallet now / Withdrawn</div>
        <div class="v" id="kpiWallet">0</div>
        <div class="s" id="kpiWithdrawn">0</div>
      </div>
      <div class="kpi">
        <div class="t">Total accrued rewards</div>
        <div class="v" id="kpiAccrued">0</div>
        <div class="s" id="kpiDays">0</div>
      </div>
    </div>

    <div class="tabs">
      <button class="tab active" id="tab7" type="button">7 days</button>
      <button class="tab" id="tab15" type="button">15 days</button>
      <button class="tab" id="tab30" type="button">30 days</button>
      <button class="tab" id="tab2m" type="button">2 months</button>
      <button class="tab" id="tab6m" type="button">6 months</button>
    </div>

    <div class="tableWrap">
      <table>
        <thead>
          <tr>
            <th>Day</th>
            <th>Date</th>
            <th>Weekday</th>
            <th>Rate %</th>
            <th>Reward</th>
            <th>Flow amount</th>
            <th>Wallet end</th>
            <th>Note</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

  </div>
</div>

<script>
  function fmt(n){
    if(!isFinite(n)) return "0";
    return new Intl.NumberFormat("en-US",{maximumFractionDigits:8}).format(n);
  }
  function fmtMoney(n, ccy){ return fmt(n) + " " + ccy; }
  function weekdayName(d){ return ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()]; }
  function addDays(date, days){ const d=new Date(date); d.setDate(d.getDate()+days); return d; }
  function addMonths(date, months){
    const d=new Date(date);
    const day=d.getDate();
    d.setMonth(d.getMonth()+months);
    if(d.getDate()<day) d.setDate(0);
    return d;
  }
  function parseDateInput(value){
    const [y,m,dd] = String(value||"").split("-").map(Number);
    return new Date(y, (m||1)-1, dd||1);
  }

  // allow comma or dot, allow "150%" and "1,500 USDT" formats
  function toNum(raw){
    const s = String(raw ?? "").trim()
      .replaceAll("₮","")
      .replaceAll("USDT","")
      .replaceAll("ECR","")
      .replaceAll("%","")
      .replaceAll(" ","")
      .replaceAll(",", ".");
    const n = Number(s);
    return isFinite(n) ? n : 0;
  }

  function boostPctFromDeposit(amount){
    const tiers = [
      { min:100, pct:130 },
      { min:500, pct:140 },
      { min:1000, pct:150 },
      { min:2500, pct:160 },
      { min:5000, pct:180 },
      { min:10000, pct:200 },
      { min:25000, pct:210 },
      { min:50000, pct:230 },
      { min:100000, pct:250 },
      { min:250000, pct:260 },
      { min:500000, pct:270 },
      { min:1000000, pct:280 },
    ];
    let pct=100;
    for(const t of tiers){
      if(amount>=t.min) pct=t.pct;
    }
    return pct;
  }

  // Withdraw dates UI (up to 10)
  const withdrawListEl = document.getElementById("withdrawList");
  const addWithdrawBtn = document.getElementById("addWithdrawBtn");
  const clearWithdrawBtn = document.getElementById("clearWithdrawBtn");

  function createWithdrawRow(value=""){
    const wrap = document.createElement("div");
    wrap.className = "withdrawItem";

    const input = document.createElement("input");
    input.type = "date";
    input.value = value;

    const del = document.createElement("button");
    del.type = "button";
    del.className = "xBtn";
    del.textContent = "X";
    del.addEventListener("click", () => {
      wrap.remove();
      calculate();
      syncWithdrawMeta();
    });

    input.addEventListener("input", () => calculate());

    wrap.appendChild(input);
    wrap.appendChild(del);
    return wrap;
  }

  function getWithdrawDates(){
    const inputs = Array.from(withdrawListEl.querySelectorAll('input[type="date"]'));
    const dates = inputs.map(i => i.value).filter(Boolean);
    return Array.from(new Set(dates)).sort();
  }
  function getWithdrawSet(){ return new Set(getWithdrawDates()); }
  function syncWithdrawMeta(){
    const count = getWithdrawDates().length;
    addWithdrawBtn.disabled = count >= 10;
  }

  addWithdrawBtn.addEventListener("click", () => {
    const count = withdrawListEl.querySelectorAll('input[type="date"]').length;
    if(count >= 10) return;
    withdrawListEl.appendChild(createWithdrawRow(""));
    syncWithdrawMeta();
  });

  clearWithdrawBtn.addEventListener("click", () => {
    withdrawListEl.innerHTML = "";
    withdrawListEl.appendChild(createWithdrawRow(""));
    syncWithdrawMeta();
    calculate();
  });

  // ECR override mode
  let ecrMode = "auto"; // "auto" | "manual"
  function setManual(){ ecrMode="manual"; }
  function setAuto(){ ecrMode="auto"; }

  document.getElementById("resetAutoBtn").addEventListener("click", () => {
    setAuto();
    calculate();
  });

  // manual triggers
  ["boostPct","boostedAmount","extraFiat","ecrNeeded"].forEach(id=>{
    document.getElementById(id).addEventListener("input", ()=>{
      setManual();
      calculate();
    });
  });

  function buildSchedule({
    flowAmount,
    depositDate,
    startRatePct,
    rateStepPct,
    startNextDay,
    withdrawSet,
    horizonDays,
    horizonEndDate
  }){
    const rows=[];
    const startDate = startNextDay ? addDays(depositDate,1) : new Date(depositDate);

    let endExclusive;
    if(typeof horizonDays === "number"){
      endExclusive = addDays(startDate, horizonDays);
    } else {
      endExclusive = addDays(horizonEndDate, 1);
    }

    let rateIndex=1;
    let wallet=0;
    let totalAccrued=0;
    let totalWithdrawn=0;
    let paidDays=0;

    for(let d=new Date(startDate); d<endExclusive; d=addDays(d,1)){
      const dateStr = d.toISOString().slice(0,10);
      const isSunday = d.getDay()===0;
      const isWithdraw = withdrawSet.has(dateStr);

      let ratePct=0, reward=0, note="";

      if(isWithdraw){
        totalWithdrawn += wallet;
        wallet = 0;
        note = "Withdraw: reset";
        rateIndex = 1;
      } else if(isSunday){
        note = "Sunday: no reward";
      } else {
        ratePct = startRatePct + (rateIndex-1)*rateStepPct;
        reward = flowAmount * (ratePct/100);
        wallet += reward;
        totalAccrued += reward;
        paidDays += 1;
        note = "Paid day";
        rateIndex += 1;
      }

      rows.push({
        date: new Date(d),
        weekday: weekdayName(d),
        ratePct,
        reward,
        flowAmount,
        walletEnd: wallet,
        note
      });
    }

    return { rows, walletEnd: wallet, totalAccrued, totalWithdrawn, paidDays };
  }

  function renderTable(rows, currency){
    const tbody = document.getElementById("tbody");
    tbody.innerHTML = "";
    rows.forEach((r, idx) => {
      const tr = document.createElement("tr");
      const dateStr = r.date.toISOString().slice(0,10);
      tr.innerHTML = `
        <td>${idx+1}</td>
        <td>${dateStr}</td>
        <td>${r.weekday}</td>
        <td>${r.ratePct ? (fmt(r.ratePct) + "%") : ""}</td>
        <td>${fmtMoney(r.reward, currency)}</td>
        <td>${fmtMoney(r.flowAmount, currency)}</td>
        <td>${fmtMoney(r.walletEnd, currency)}</td>
        <td>${r.note}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  function exportCSV(){
    const rows = window.__lastRows || [];
    if(!rows.length){ alert("No data"); return; }

    const headers = Object.keys(rows[0]);
    const lines = [
      headers.join(","),
      ...rows.map(r => headers.map(h => {
        const s = String(r[h] ?? "");
        const esc = s.replaceAll('"','""');
        return (esc.includes(",") || esc.includes('"') || esc.includes("\n")) ? `"${esc}"` : esc;
      }).join(","))
    ];

    const blob = new Blob([lines.join("\n")], {type:"text/csv;charset=utf-8;"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "growing-flow.csv";
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  }

  let activeTab="7";
  function setTab(tab){
    activeTab=tab;
    ["7","15","30","2m","6m"].forEach(t=>{
      document.getElementById("tab"+t).classList.toggle("active", t===tab);
    });
    calculate();
  }

  function calculate(){
    const currency = (document.getElementById("currency").value || "USDT").trim();
    const baseDeposit = toNum(document.getElementById("amount").value);
    const ecrRate = toNum(document.getElementById("ecrRate").value);
    const dateVal = document.getElementById("depositDate").value;
    if(!dateVal) return;

    const depositDate = parseDateInput(dateVal);
    const startRatePct = toNum(document.getElementById("startRate").value) || 0.3;
    const rateStepPct = toNum(document.getElementById("rateStep").value) || 0.01;
    const startNextDay = document.getElementById("startNextDay").checked;
    const withdrawSet = getWithdrawSet();

    // AUTO baseline
    let boostPctAuto = boostPctFromDeposit(baseDeposit);
    let flowAmountAuto = baseDeposit * (boostPctAuto/100);
    let extraAuto = flowAmountAuto - baseDeposit;
    let ecrNeededAuto = ecrRate>0 ? (extraAuto / ecrRate) : 0;

    // MANUAL overrides
    let boostPct = boostPctAuto;
    let flowAmount = flowAmountAuto;
    let extraFiat = extraAuto;
    let ecrNeeded = ecrNeededAuto;

    if(ecrMode === "manual"){
      const boostPctInput = toNum(document.getElementById("boostPct").value);
      const flowInput = toNum(document.getElementById("boostedAmount").value);
      const extraInput = toNum(document.getElementById("extraFiat").value);
      const ecrInput = toNum(document.getElementById("ecrNeeded").value);

      // priority: if user filled something, use it
      if(flowInput > 0){
        flowAmount = flowInput;
        extraFiat = Math.max(0, flowAmount - baseDeposit);
        boostPct = baseDeposit>0 ? (flowAmount/baseDeposit*100) : boostPctAuto;
        ecrNeeded = ecrRate>0 ? (extraFiat/ecrRate) : 0;
      } else if(extraInput > 0){
        extraFiat = extraInput;
        flowAmount = baseDeposit + extraFiat;
        boostPct = baseDeposit>0 ? (flowAmount/baseDeposit*100) : boostPctAuto;
        ecrNeeded = ecrRate>0 ? (extraFiat/ecrRate) : 0;
      } else if(ecrInput > 0){
        ecrNeeded = ecrInput;
        extraFiat = ecrRate>0 ? (ecrNeeded*ecrRate) : 0;
        flowAmount = baseDeposit + extraFiat;
        boostPct = baseDeposit>0 ? (flowAmount/baseDeposit*100) : boostPctAuto;
      } else if(boostPctInput > 0){
        boostPct = boostPctInput;
        flowAmount = baseDeposit * (boostPct/100);
        extraFiat = Math.max(0, flowAmount - baseDeposit);
        ecrNeeded = ecrRate>0 ? (extraFiat/ecrRate) : 0;
      }
    }

    // write back fields (even in manual, we keep values consistent)
    document.getElementById("boostPct").value = fmt(boostPct) + "%";
    document.getElementById("boostedAmount").value = fmt(flowAmount) + " " + currency;
    document.getElementById("extraFiat").value = fmt(extraFiat) + " ₮";
    document.getElementById("ecrNeeded").value = fmt(ecrNeeded) + " ECR";

    // schedule
    let result;
    if(activeTab === "7"){
      result = buildSchedule({ flowAmount, depositDate, startRatePct, rateStepPct, startNextDay, withdrawSet, horizonDays: 7 });
    } else if(activeTab === "15"){
      result = buildSchedule({ flowAmount, depositDate, startRatePct, rateStepPct, startNextDay, withdrawSet, horizonDays: 15 });
    } else if(activeTab === "30"){
      result = buildSchedule({ flowAmount, depositDate, startRatePct, rateStepPct, startNextDay, withdrawSet, horizonDays: 30 });
    } else if(activeTab === "2m"){
      const startDate = startNextDay ? addDays(depositDate,1) : new Date(depositDate);
      const endDate = addMonths(startDate, 2);
      result = buildSchedule({ flowAmount, depositDate, startRatePct, rateStepPct, startNextDay, withdrawSet, horizonEndDate: endDate });
    } else {
      const startDate = startNextDay ? addDays(depositDate,1) : new Date(depositDate);
      const endDate = addMonths(startDate, 6);
      result = buildSchedule({ flowAmount, depositDate, startRatePct, rateStepPct, startNextDay, withdrawSet, horizonEndDate: endDate });
    }

    renderTable(result.rows, currency);

    // KPI
    const kpiWrap = document.getElementById("kpiWrap");
    kpiWrap.style.display = "grid";
    document.getElementById("kpiDeposit").textContent = fmtMoney(flowAmount, currency);
    document.getElementById("kpiMeta").textContent = "Mode: " + (ecrMode==="manual" ? "manual" : "auto") + " | Withdraw dates: " + getWithdrawDates().length + "/10";
    document.getElementById("kpiWallet").textContent = fmtMoney(result.walletEnd, currency);
    document.getElementById("kpiWithdrawn").textContent = "Withdrawn: " + fmtMoney(result.totalWithdrawn, currency);
    document.getElementById("kpiAccrued").textContent = fmtMoney(result.totalAccrued, currency);

    const sundays = result.rows.filter(x => x.weekday==="Sun").length;
    document.getElementById("kpiDays").textContent = "Paid days: " + result.paidDays + " | Sundays: " + sundays;

    // CSV data
    window.__lastRows = result.rows.map((r,i)=>({
      Day: i+1,
      Date: r.date.toISOString().slice(0,10),
      Weekday: r.weekday,
      RatePct: r.ratePct,
      Reward: r.reward,
      FlowAmount: r.flowAmount,
      WalletEnd: r.walletEnd,
      Note: r.note
    }));

    syncWithdrawMeta();
  }

  (function init(){
    const now = new Date();
    document.getElementById("depositDate").value = now.toISOString().slice(0,10);

    withdrawListEl.innerHTML = "";
    withdrawListEl.appendChild(createWithdrawRow(""));
    syncWithdrawMeta();

    setAuto();
    setTab("7");
    calculate();
  })();

  document.getElementById("calcBtn").addEventListener("click", calculate);
  document.getElementById("exportBtn").addEventListener("click", exportCSV);

  document.getElementById("tab7").addEventListener("click", ()=>setTab("7"));
  document.getElementById("tab15").addEventListener("click", ()=>setTab("15"));
  document.getElementById("tab30").addEventListener("click", ()=>setTab("30"));
  document.getElementById("tab2m").addEventListener("click", ()=>setTab("2m"));
  document.getElementById("tab6m").addEventListener("click", ()=>setTab("6m"));

  // recalculation triggers
  ["amount","depositDate","currency","startRate","rateStep","startNextDay","ecrRate"]
    .forEach(id => document.getElementById(id).addEventListener("input", calculate));
</script>
</body>
</html>
